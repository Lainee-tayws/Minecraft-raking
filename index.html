<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Minecraft Dynamic Tiers</title>
<style>
body {margin:0;font-family:Arial,sans-serif;color:white;overflow-x:hidden;background:linear-gradient(120deg,#0f2027,#203a43,#2c5364);}
canvas {position:fixed;top:0;left:0;pointer-events:none;z-index:0;}
.container {position:relative;z-index:1;padding:20px;}
h1{text-align:center;}
table {width:100%;border-collapse:collapse;backdrop-filter:blur(15px);background:rgba(255,255,255,0.05);border-radius:15px;overflow:hidden;}
th,td {padding:12px;text-align:center;}
th {background:rgba(255,255,255,0.1);}
tr {border-bottom:1px solid rgba(255,255,255,0.1);animation:fadeIn 0.4s ease;transition:0.2s;cursor:pointer;}
tr:hover {background:rgba(255,255,255,0.08);transform:scale(1.01);}
@keyframes fadeIn {from{opacity:0;transform:translateY(5px);}to{opacity:1;transform:translateY(0);}}
.top-1 {background:linear-gradient(90deg,#3a2f00,#ffd70055);box-shadow:0 0 25px #ffd70088;}
.top-1 td:first-child{color:#ffd700;font-size:18px;font-weight:bold;}
.top-2 {background:linear-gradient(90deg,#2a2a2a,#c0c0c055);box-shadow:0 0 20px #c0c0c088;}
.top-2 td:first-child{color:#c0c0c0;font-size:17px;font-weight:bold;}
.top-3 {background:linear-gradient(90deg,#2a1a00,#cd7f3255);box-shadow:0 0 15px #cd7f3288;}
.top-3 td:first-child{color:#cd7f32;font-size:16px;font-weight:bold;}
button{padding:10px 20px;margin:5px;background:#111;color:white;border:1px solid #333;cursor:pointer;}
input,textarea,select{padding:8px;margin:5px;background:#111;border:1px solid #333;color:white;width:100%;box-sizing:border-box;}
#bioPopup{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:rgba(0,0,0,0.85);padding:20px;border-radius:15px;display:none;z-index:999;max-width:300px;}
#bioPopup button{margin-top:10px;}
#searchBar{width:100%;padding:8px;margin:10px 0;background:#111;border:1px solid #333;color:white;}
#filterServer{width:100%;padding:8px;margin-bottom:10px;background:#111;border:1px solid #333;color:white;}
.deleteBtn{background:red;color:white;padding:4px 8px;border:none;border-radius:4px;cursor:pointer;}
.editBtn{background:orange;color:white;padding:4px 8px;border:none;border-radius:4px;cursor:pointer;}
@media(max-width:600px){th,td{padding:6px;font-size:12px;}}
</style>
</head>
<body>
<canvas id="snow"></canvas>
<div class="container">
<h1>GLOBAL PVP DYNAMIC TIERS</h1>

<input type="text" id="searchBar" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∏–∫—É...">
<select id="filterServer">
  <option value="all">–§–∏–ª—å—Ç—Ä –ø–æ —Å–µ—Ä–≤–µ—Ä—É: –í—Å–µ</option>
  <option value="ugame">Ugame</option>
  <option value="breadix">Breadix</option>
  <option value="minenex">Minenex</option>
</select>

<div id="adminPanel" style="display:none;">
  <input id="name" placeholder="–ù–∏–∫">
  <input id="ugame" placeholder="Ugame —Ç–æ–ø">
  <input id="breadix" placeholder="Breadix —Ç–æ–ø">
  <input id="minenex" placeholder="Minenex —Ç–æ–ø">
  <textarea id="bio" placeholder="–ë–∏–æ–≥—Ä–∞—Ñ–∏—è"></textarea>
  <input id="position" type="number" placeholder="–ü–æ–∑–∏—Ü–∏—è –≤ –≥–ª–æ–±–∞–ª—å–Ω–æ–º —Ç–æ–ø–µ (1,2,3...)">
  <button onclick="addOrEditPlayer()">–°–æ—Ö—Ä–∞–Ω–∏—Ç—å</button>
</div>

<button onclick="openAdmin()">–ê–¥–º–∏–Ω–∫–∞</button>
<table>
<thead>
<tr><th>#</th><th>–ò–≥—Ä–æ–∫</th><th>Ugame</th><th>Breadix</th><th>Minenex</th><th>–î–µ–π—Å—Ç–≤–∏—è</th></tr>
</thead>
<tbody id="tableBody"></tbody>
</table>
</div>

<div id="bioPopup">
<p id="bioText"></p>
<button onclick="closeBio()">–ó–∞–∫—Ä—ã—Ç—å</button>
</div>

<script>
// ===== –î–ê–ù–ù–´–ï =====
let players=JSON.parse(localStorage.getItem("players"))||[];
let editIndex=null;
let filterServer='all';
let searchQuery='';

// ===== –†–ï–ù–î–ï–† –¢–ê–ë–õ–ò–¶–´ =====
function render(){
  const table=document.getElementById("tableBody");
  table.innerHTML='';
  let filtered=players.filter(p=>{
    if(filterServer!=='all' && (!p[filterServer]||p[filterServer]==='')) return false;
    if(searchQuery && !p.name.toLowerCase().includes(searchQuery.toLowerCase())) return false;
    return true;
  });
  filtered.forEach((p,i)=>{
    let cls='';
    if(i===0) cls='top-1';
    else if(i===1) cls='top-2';
    else if(i===2) cls='top-3';
    let row=document.createElement("tr");
    row.className=cls;
    row.innerHTML=`<td>${i+1}</td><td>${p.name}</td><td>${p.ugame}</td><td>${p.breadix}</td><td>${p.minenex}</td>
    <td>
      <button class="editBtn" onclick="editPlayer(${i})">–†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å</button>
      <button class="deleteBtn" onclick="deletePlayer(${i})">üóë</button>
    </td>`;
    row.onclick=()=>showBio(i);
    table.appendChild(row);
  });
}

// ===== –ê–î–ú–ò–ù–ö–ê =====
function openAdmin(){
  const pass=prompt("–ü–∞—Ä–æ–ª—å:");
  if(pass==="doirsy123") document.getElementById("adminPanel").style.display="block";
}
function clearAdmin(){
  name.value=''; ugame.value=''; breadix.value=''; minenex.value=''; bio.value=''; position.value='';
}
function editPlayer(i){
  editIndex=i;
  name.value=players[i].name;
  ugame.value=players[i].ugame;
  breadix.value=players[i].breadix;
  minenex.value=players[i].minenex;
  bio.value=players[i].bio;
  position.value=i+1;
}
function deletePlayer(i){
  if(confirm(`–£–¥–∞–ª–∏—Ç—å –∏–≥—Ä–æ–∫–∞ ${players[i].name}?`)){
    players.splice(i,1);
    localStorage.setItem("players",JSON.stringify(players));
    render();
  }
}
function addOrEditPlayer(){
  const n=name.value.trim();
  const u=ugame.value.trim();
  const b=breadix.value.trim();
  const m=minenex.value.trim();
  const bioText=bio.value.trim();
  let pos=parseInt(position.value)-1;
  if(!n){alert("–ù–∏–∫ –æ–±—è–∑–∞—Ç–µ–ª–µ–Ω");return;}
  const playerData={name:n,ugame:u,breadix:b,minenex:m,bio:bioText};
  if(pos<0 || pos>players.length) pos=players.length;

  if(editIndex!==null){
    // —É–¥–∞–ª—è–µ–º —Å—Ç–∞—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞
    players.splice(editIndex,1);
    // –≤—Å—Ç–∞–≤–ª—è–µ–º –Ω–∞ –ø–æ–∑–∏—Ü–∏—é
    players.splice(pos,0,playerData);
    editIndex=null;
  } else {
    // –≤—Å—Ç–∞–≤–ª—è–µ–º –Ω–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞ –Ω–∞ –ø–æ–∑–∏—Ü–∏—é —Å–¥–≤–∏–≥–∞—è –≤–Ω–∏–∑ –≤—Å–µ—Ö
    players.splice(pos,0,playerData);
  }
  localStorage.setItem("players",JSON.stringify(players));
  clearAdmin();
  render();
}

// ===== –ë–ò–û–ì–†–ê–§–ò–Ø =====
function showBio(i){
  const popup=document.getElementById("bioPopup");
  document.getElementById("bioText").innerText=players[i].bio||"–ë–∏–æ–≥—Ä–∞—Ñ–∏—è –Ω–µ –¥–æ–±–∞–≤–ª–µ–Ω–∞";
  popup.style.display="block";
}
function closeBio(){document.getElementById("bioPopup").style.display="none";}

// ===== –ü–û–ò–°–ö –ò –§–ò–õ–¨–¢–† =====
document.getElementById("searchBar").addEventListener("input",e=>{searchQuery=e.target.value;render();});
document.getElementById("filterServer").addEventListener("change",e=>{filterServer=e.target.value;render();});

// ===== –°–ù–ï–ì =====
const canvas=document.getElementById("snow");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth; canvas.height=window.innerHeight;
let snow=[];
for(let i=0;i<200;i++){snow.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:Math.random()*3+1,s:Math.random()*1+0.5});}
function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);
  ctx.fillStyle="white";
  ctx.beginPath();
  for(let f of snow){ctx.moveTo(f.x,f.y);ctx.arc(f.x,f.y,f.r,0,Math.PI*2);}
  ctx.fill();
  for(let f of snow){f.y+=f.s;if(f.y>canvas.height){f.y=0;f.x=Math.random()*canvas.width;}}
}
setInterval(draw,30);
window.addEventListener("resize",()=>{canvas.width=window.innerWidth;canvas.height=window.innerHeight;});

// ===== –ò–ù–ò–¶–ò–ê–õ–ò–ó–ê–¶–ò–Ø =====
render();
</script>
</body>
</html>
